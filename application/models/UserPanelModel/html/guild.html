<script>var eventBinder = new UserPanelEventBinder();</script>
<div id="body-wrapper">
    <div id="body-content">
        <div class="vertical-separator"></div>

        <div id="navigation-bar">
            <ul>
                <li><?php echo Functions::generateInternalHyperlink('userpanel', '', '', 'Control Panel Home', ''); ?></li>
                <li>>>></li>
                <?php if ( $data->_currentPanel->_action == UserPanelModelGuild::GUILD_EDIT): ?>
                    <li><?php echo 'Guild Administration (' . $data->_currentPanel->_guildDetails->_name . ')'; ?></li>
                    <li>>>></li>
                    <li>Edit Guild Details</li>
                <?php elseif ( $data->_currentPanel->_action == UserPanelModelGuild::GUILD_ADD ): ?>
                    <li>Create New Guild</li>
                <?php elseif ( $data->_currentPanel->_action == UserPanelModelGuild::GUILD_REMOVE ): ?>
                    <li><?php echo 'Guild Administration (' . $data->_currentPanel->_guildDetails->_name . ')'; ?></li>
                    <li>>>></li>
                    <li>Remove Guild</li>
                <?php elseif ( $data->_currentPanel->_action == UserPanelModelGuild::GUILD_RAID_TEAM ): ?>
                    <li><?php echo 'Guild Administration (' . $data->_currentPanel->_guildDetails->_name . ')'; ?></li>
                    <li>>>></li>
                    <li>Add Raid Team</li>
                <?php endif; ?>
            </ul>
        </div>

        <div class="vertical-separator"></div>

        <div id="main-block">
            <?php if ( !empty($data->_currentPanel->_dialogOptions) ): ?>
                <?php echo Functions::showDialogWindow($data->_currentPanel->_dialogOptions); ?>

                <div class="vertical-separator"></div>
            <?php endif; ?>

            <?php $data->getHTML($data->_currentPanel); ?>
        </div>

        <div id="side-block">
            <?php if ( isset($data->_currentPanel->_guildDetails) ): ?>
                <div id="side-profile-wrapper">
                    <table class="side-profile-table">
                        <thead>
                            <tr>
                                <th colspan="2"><div id="profile-logo"><?php echo $data->_currentPanel->_guildDetails->_logo; ?></div></th>
                            </tr>
                            <tr>
                                <th colspan="2"><div id="profile-name"><?php echo $data->_currentPanel->_guildDetails->_name; ?></div></th>
                            </tr>
                        </thead>
                        <tbody>
                            <?php foreach( UserPanelModelGuild::GUILD_PROFILE as $header => $key ): ?>
                                <tr>
                                    <th><?php echo $header; ?></th>
                                    <td><?php echo $data->_currentPanel->_guildDetails->$key; ?></td>
                                </tr>
                            <?php endforeach; ?>
                        </tbody>
                        <tfoot>
                            <tr>
                                <th colspan="2">
                                    <div id="profile-faction-logo"><?php echo Functions::getImageFaction($data->_currentPanel->_guildDetails->_faction); ?></div>
                                </th>
                            </tr>
                        </tfoot>
                    </table>
                </div>
            <?php else: ?>
                <div id="side-profile-wrapper">
                    <table class="side-profile-table">
                        <thead>
                            <tr>
                                <th colspan="2">
                                    <?php echo $data->_currentPanel->_userDetails->_userName; ?>
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <th>Email Address</th>
                                <td><?php echo $data->_currentPanel->_userDetails->_emailAddress; ?></td>
                            </tr>
                            <tr>
                                <th>Date Created</th>
                                <td><?php echo Functions::formatDate($data->_currentPanel->_userDetails->_dateCreated, 'm-d-Y'); ?></td>
                            </tr>
                        </tbody>
                        <tfoot>
                        </tfoot>
                    </table>
                </div>
            <?php endif; ?>
        </div>
    </div>
</div>