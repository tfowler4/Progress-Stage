<script>var eventBinder = new UserPanelEventBinder();</script>
<div id="body-wrapper">
    <div id="body-content">
        <div class="vertical-separator"></div>

        <div id="navigation-bar">
            <ul>
                <li><?php echo Functions::generateInternalHyperlink('userpanel', '', '', 'Control Panel Home', ''); ?></li>
            </ul>
        </div>

        <div class="vertical-separator"></div>

        <div class="option-container user">
            <div class="option-title">Account Management</div>
            <div class="option-content">
                <table>
                    <thead>
                        <tr>
                            <th>
                                <?php echo $data->_userDetails->_userName; ?>
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <th>Email Address</th>
                        </tr>
                        <tr>
                            <td><?php echo $data->_userDetails->_emailAddress; ?></td>
                        </tr>
                        <tr>
                            <th>Date Created</th>
                        </tr>
                        <tr>
                            <td><?php echo Functions::formatDate($data->_userDetails->_dateCreated, 'm-d-Y'); ?></td>
                        </tr>
                    </tbody>
                    <tfoot>
                    </tfoot>
                </table>
            </div>

            <?php echo $data->generateInternalHyperlink(UserPanelModel::SUB_USER, UserPanelModelUser::USER_EMAIL,'<div class="option-footer">Change Email Address</div>', true); ?>
            <?php echo $data->generateInternalHyperlink(UserPanelModel::SUB_USER, UserPanelModelUser::USER_PASSWORD,'<div class="option-footer">Change Password</div>', true); ?>
        </div>

        <?php foreach ( $data->_userGuilds as $guildId => $guildDetails ): ?>
            <div class="option-container guild">
                <div class="option-title">Guild Management</div>
                <div id="guild-pane-<?php echo $guildDetails->_guildId; ?>" class="option-header guild"><?php echo $guildDetails->_name; ?></div>
                <div id="guild-content-<?php echo $guildDetails->_guildId; ?>" class="option-content guild active">
                    <table>
                        <thead>
                            <tr>
                                <th>
                                    <div>
                                        <?php echo $guildDetails->_logo; ?>
                                    </div>
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <th>Date Created</th>
                            </tr>
                            <tr>
                                <td><?php echo Functions::formatDate($guildDetails->_dateCreated, 'm-d-Y'); ?></td>
                            </tr>
                            <tr>
                                <th>Server</th>
                            </tr>
                            <tr>
                                <td><?php echo $guildDetails->_serverLink; ?></td>
                            </tr>
                            <tr>
                                <th>Faction</th>
                            </tr>
                            <tr>
                                <td><?php echo $guildDetails->_faction; ?></td>
                            </tr>
                            <tr>
                                <th>Country</th>
                            </tr>
                            <tr>
                                <td><?php echo $guildDetails->_countryLink; ?></td>
                            </tr>
                            <tr>
                                <th>Guild Leader</th>
                            </tr>
                            <tr>
                                <td><?php echo $guildDetails->_leader; ?></td>
                            </tr>
                            <tr>
                                <th>Status</th>
                            </tr>
                            <tr>
                                <td><?php echo $guildDetails->_active; ?></td>
                            </tr>
                            <tr>
                                <th>Number of Raid Teams</th>
                            </tr>
                            <tr>
                                <td>
                                    <?php echo (count($data->_raidTeams[$guildDetails->_guildId])+1); ?>
                                </td>
                            </tr>
                        </tbody>
                        <tfoot>
                        </tfoot>
                    </table>

                    <?php echo $data->generateInternalHyperlink(UserPanelModel::SUB_GUILD, UserPanelModelGuild::GUILD_EDIT . '/' . $guildDetails->_guildId,'<div class="option-footer">Edit Guild Details</div>', true); ?>
                    <?php echo $data->generateInternalHyperlink(UserPanelModel::SUB_KILLS, UserPanelModelKill::KILLS_ADD . '/' . $guildDetails->_guildId,'<div class="option-footer">Add/Edit Kill Submissions</div>', true); ?>
                    <?php echo $data->generateInternalHyperlink(UserPanelModel::SUB_GUILD, UserPanelModelGuild::GUILD_RAID_TEAM . '/' . $guildDetails->_guildId,'<div class="option-footer">Add Raid Team</div>', true); ?>
                    <?php echo $data->generateInternalHyperlink(UserPanelModel::SUB_GUILD, UserPanelModelGuild::GUILD_REMOVE . '/' . $guildDetails->_guildId,'<div class="option-footer">Remove Guild</div>', true); ?>
                </div>

                <?php foreach( $data->_raidTeams[$guildDetails->_guildId] as $guildId => $guildDetails ): ?>
                    <div id="guild-pane-<?php echo $guildDetails->_guildId; ?>" class="option-footer guild"><?php echo $guildDetails->_name; ?></div>
                    <div id="guild-content-<?php echo $guildDetails->_guildId; ?>" class="option-content guild hidden">
                        <table>
                            <thead>
                                <tr>
                                    <th>
                                        <div>
                                            <?php echo $guildDetails->_logo; ?>
                                        </div>
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <th>Date Created</th>
                                </tr>
                                <tr>
                                    <td><?php echo Functions::formatDate($guildDetails->_dateCreated, 'm-d-Y'); ?></td>
                                </tr>
                                <tr>
                                    <th>Server</th>
                                </tr>
                                <tr>
                                    <td><?php echo $guildDetails->_serverLink; ?></td>
                                </tr>
                                <tr>
                                    <th>Faction</th>
                                </tr>
                                <tr>
                                    <td><?php echo $guildDetails->_faction; ?></td>
                                </tr>
                                <tr>
                                    <th>Country</th>
                                </tr>
                                <tr>
                                    <td><?php echo $guildDetails->_countryLink; ?></td>
                                </tr>
                                <tr>
                                    <th>Raid Leader</th>
                                </tr>
                                <tr>
                                    <td><?php echo $guildDetails->_leader; ?></td>
                                </tr>
                                <tr>
                                    <th>Status</th>
                                </tr>
                                <tr>
                                    <td><?php echo $guildDetails->_active; ?></td>
                                </tr>
                            </tbody>
                            <tfoot>
                            </tfoot>
                        </table>

                        <?php echo $data->generateInternalHyperlink(UserPanelModel::SUB_GUILD, UserPanelModelGuild::GUILD_EDIT . '/' . $guildDetails->_guildId,'<div class="option-footer">Edit Raid Team Details</div>', true); ?>
                        <?php echo $data->generateInternalHyperlink(UserPanelModel::SUB_KILLS, UserPanelModelKill::KILLS_ADD . '/' . $guildDetails->_guildId,'<div class="option-footer">Add/Edit Kill Submissions</div>', true); ?>
                        <?php echo $data->generateInternalHyperlink(UserPanelModel::SUB_GUILD, UserPanelModelGuild::GUILD_REMOVE . '/' . $guildDetails->_guildId,'<div class="option-footer">Remove Raid Team</div>', true); ?>
                    </div>
                <?php endforeach; ?>
            </div>
        <?php endforeach; ?>

        <?php for ( $i = $data->_numOfGuilds; $i < UserPanelModelGuild::MAX_GUILDS; $i++ ): ?>
            <?php echo $data->generateInternalHyperlink(UserPanelModel::SUB_GUILD, 
                                                        UserPanelModelGuild::GUILD_ADD,
                                                        '<div class="option-container guild new">
                                                         <div class="option-title">Guild Management</div>
                                                         <div class="option-content new">Add New Guild</div>
                                                         </div>', 
                                                        true); ?>
        <?php endfor; ?>

        <div class="clear"></div>

        <div class="vertical-separator"></div>
    </div>
</div>